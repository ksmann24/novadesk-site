<!doctype html>
<html lang="en">
<head>
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NovaDesk — AI Receptionist that books jobs 24/7</title>
  <meta name="description" content="Never miss another lead. NovaDesk responds instantly, qualifies, and books jobs to your calendar—24/7." />

  <!-- Canonical -->
  <link rel="canonical" href="https://www.NovaDeskApp.com/">

  <!-- Favicon (replace with your own) -->
  <link rel="icon" href="/favicon.ico" />

  <!-- Open Graph -->
  <meta property="og:title" content="NovaDesk — AI Receptionist that books jobs 24/7" />
  <meta property="og:description" content="Never miss another lead. NovaDesk responds instantly, qualifies, and books jobs to your calendar—24/7." />
  <meta property="og:url" content="https://www.NovaDeskApp.com/" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://www.NovaDeskApp.com/og-image.png" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="NovaDesk — AI Receptionist that books jobs 24/7" />
  <meta name="twitter:description" content="Never miss another lead. NovaDesk responds instantly, qualifies, and books jobs to your calendar—24/7." />
  <meta name="twitter:image" content="https://www.NovaDeskApp.com/og-image.png" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Minimal CSS (no framework) -->
  <style>
    :root {
      --bg: #0b1220;
      --card: #121a2a;
      --text: #eef2ff;
      --muted: #b7c1e1;
      --primary: #3b82f6;
      --primary-600: #2563eb;
      --accent: #22c55e;
      --ring: rgba(59,130,246,.35);
      --maxw: 1140px;
    }
    * { box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    html, body { margin: 0; padding: 0; background: var(--bg); color: var(--text); font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    a { color: var(--primary); text-decoration: none; }
    a:hover { text-decoration: underline; }
    .container { width: 100%; margin: 0 auto; max-width: var(--maxw); padding: 0 20px; }
    header { position: sticky; top: 0; z-index: 40; backdrop-filter: blur(8px); background: rgba(11,18,32,.65); border-bottom: 1px solid rgba(255,255,255,.06); }
    .nav { display: flex; align-items: center; justify-content: space-between; height: 64px; }
    .brand { display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.2px; }
    .logo { width: 32px; height: 32px; }
    .nav-links { display:flex; gap:18px; align-items:center; }
    .hide-mobile { display:none; }
    .btn { display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:12px 16px; border-radius:10px; font-weight:600; border:1px solid rgba(255,255,255,.12); background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); color: var(--text); }
    .btn:hover { border-color: rgba(255,255,255,.25); }
    .btn-primary { background: linear-gradient(180deg, var(--primary), var(--primary-600)); border-color: transparent; }
    .btn-primary:hover { filter: brightness(1.05); }
    .hero { padding: 72px 0 32px; background: radial-gradient(800px 400px at 60% -10%, rgba(59,130,246,.25), transparent), radial-gradient(600px 300px at 20% -10%, rgba(34,197,94,.18), transparent); }
    .hero-wrap { display:grid; grid-template-columns: 1.1fr .9fr; gap:40px; align-items:center; }
    h1 { font-size: clamp(32px, 5vw, 52px); line-height:1.06; margin: 0 0 12px; }
    .sub { color: var(--muted); font-size: clamp(16px, 2.2vw, 18px); margin: 0 0 22px; }
    .cta-row { display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
    .badge { display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; font-size:12px; color:#c7f9d4; background: rgba(34,197,94,.18); border:1px solid rgba(34,197,94,.35); }
    .card { background: var(--card); border:1px solid rgba(255,255,255,.06); border-radius:16px; padding:18px; }
    .ui { height: 360px; border-radius:14px; background: linear-gradient(180deg, #0f172a, #0b1220); border:1px solid rgba(255,255,255,.06); position: relative; overflow:hidden; }
    .ui::after { content:""; position:absolute; inset:0; background: radial-gradient(500px 220px at 80% 0%, rgba(59,130,246,.13), transparent); pointer-events:none; }
    section { padding: 56px 0; }
    .grid-3 { display:grid; grid-template-columns: repeat(3, 1fr); gap:18px; }
    .grid-2 { display:grid; grid-template-columns: repeat(2, 1fr); gap:22px; }
    h2 { font-size: clamp(24px, 3.5vw, 36px); margin: 0 0 12px; }
    .muted { color: var(--muted); }
    .list { display:grid; gap:10px; margin: 14px 0 0; padding: 0; list-style: none; }
    .list li { display:flex; gap:10px; align-items:flex-start; }
    .check { color: var(--accent); font-weight: 900; }
    .pricing { display:grid; grid-template-columns: repeat(3, 1fr); gap:18px; }
    .price h3 { margin:0 0 8px; }
    .price .amt { font-size: 28px; font-weight: 700; }
    .foot { border-top:1px solid rgba(255,255,255,.08); padding: 24px 0; color: var(--muted); font-size:14px; }
    .menu { display:none; background:none; border:1px solid rgba(255,255,255,.2); color: var(--text); border-radius:8px; padding:8px 10px; }
    .mobile-panel { display:none; position: fixed; inset:64px 0 0 0; background: rgba(11,18,32,.98); padding: 18px; }
    .mobile-panel a { display:block; padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,.06); }
    .bottom-sections { display: flex; gap: 40px; align-items: flex-start; flex-wrap: wrap; }
    .bottom-sections section { flex: 1; min-width: 300px; }

    /* Forms */
    form { display:grid; gap:10px; }
    input, textarea { width: 100%; padding: 12px 14px; border-radius:10px; background:#0f172a; border:1px solid rgba(255,255,255,.12); color: var(--text); }
    input:focus, textarea:focus { outline: 2px solid var(--ring); border-color: var(--primary); }
    .error { color:#ffb4b4; font-size:12px; display:none; margin-top:-6px; }

    /* Responsive */
    @media (max-width: 980px) {
      .hero-wrap { grid-template-columns: 1fr; }
      .grid-3 { grid-template-columns: 1fr; }
      .grid-2 { grid-template-columns: 1fr; }
      .pricing { grid-template-columns: 1fr; }
      .hide-mobile { display:none; }
      .menu { display:inline-flex; }
    }
  </style>

  <!-- JSON-LL -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "NovaDesk",
    "applicationCategory": "BusinessApplication",
    "operatingSystem": "Web",
    "offers": { "@type": "Offer", "priceCurrency": "USD", "price": "497", "description": "Monthly subscription" },
    "publisher": { "@type": "Organization", "name": "NovaDesk", "url": "https://www.NovaDeskApp.com" }
  }
  </script>
</head>
<body>

<header>
  <div class="container nav" role="navigation" aria-label="Main">
    <a class="brand" href="#top"><img src="/logo-nd.png" alt="NovaDesk logo" class="logo" /><span>NovaDesk</span></a>
    <nav class="nav-links hide-mobile" aria-label="Primary">
      <a href="#features">Features</a>
      <a href="#how">How it works</a>
      <a href="#pricing">Pricing</a>
      <a href="#contact">Contact</a>
      <a class="btn btn-primary" href="#booking" aria-label="Book a 7-minute demo">Book demo</a>
    </nav>
    <button class="menu" aria-label="Open menu" onclick="toggleMenu()">Menu</button>
  </div>
  <div id="mobilePanel" class="mobile-panel" role="dialog" aria-modal="true" aria-labelledby="mnav" hidden>
    <div class="container">
      <strong id="mnav" style="display:block; margin-bottom:6px;">Menu</strong>
      <a href="#features" onclick="toggleMenu(true)">Features</a>
      <a href="#how" onclick="toggleMenu(true)">How it works</a>
      <a href="#pricing" onclick="toggleMenu(true)">Pricing</a>
      <a href="#contact" onclick="toggleMenu(true)">Contact</a>
      <a class="btn btn-primary" href="#demo" onclick="toggleMenu(true)">Book demo</a>
    </div>
  </div>
</header>

<main id="top">
  <!-- HERO -->
  <section class="hero">
    <div class="container hero-wrap">
      <div>
        <span class="badge">New • AI Receptionist</span>
        <h1>Never miss another lead.<br/>NovaDesk books jobs <span style="color:var(--accent)">24/7</span>.</h1>
        <p class="sub">Instantly replies to missed calls & web forms, qualifies with 3–5 questions, and <strong>books directly to your calendar</strong>. More bookings from the leads you already have.</p>
        <div class="cta-row" id="demo">
          <a class="btn btn-primary" href="#booking">Book a 7-minute demo</a>
          <a class="btn" href="#contact">Talk to sales</a>
        </div>
        <p class="muted" style="margin-top:8px;">Typical boost: <strong>+20–40% more booked jobs</strong> within 1–2 weeks.</p>
      </div>
      <div class="card ui" aria-hidden="true">
        <div style="position:absolute; inset:18px; display:grid; gap:10px;">
          <div class="card" style="background:#0b1220;border-color:rgba(255,255,255,.08)">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <strong>Missed Call Text-Back</strong><span style="font-size:12px;color:var(--muted)">Active</span>
            </div>
            <p class="muted" style="margin:6px 0 0">“Hey! We saw your call—can we help with a <em>water heater issue</em>? I can book you now.”</p>
          </div>
          <div class="card" style="display:grid;grid-template-columns:1fr auto;align-items:center;">
            <div>
              <strong>Auto Qualification</strong>
              <p class="muted" style="margin:4px 0 0">Zip code • Problem type • Timing • Photo (optional)</p>
            </div>
            <button class="btn btn-primary" type="button">Book Friday 10:00 AM</button>
          </div>
          <div class="card"><strong>Daily Summary</strong><p class="muted" style="margin:4px 0 0">12 new leads • 7 bookings • Avg response: 14s • 4 new reviews</p></div>
        </div>
      </div>
    </div>
  </section>

  <!-- FEATURES -->
  <section id="features">
    <div class="container">
      <h2>Why teams choose NovaDesk</h2>
      <p class="muted">A receptionist that never sleeps—without hiring.</p>
      <div class="grid-3" style="margin-top:18px">
        <div class="card">
          <h3>Instant response</h3>
          <p class="muted">Reply to every missed call or form in &lt;60 seconds—automatically.</p>
          <ul class="list">
            <li><span class="check">✔</span> SMS follow-ups</li>
            <li><span class="check">✔</span> After-hours coverage</li>
            <li><span class="check">✔</span> SLA-friendly timings</li>
          </ul>
        </div>
        <div class="card">
          <h3>Book more jobs</h3>
          <p class="muted">Ask 3–5 qualifiers and book directly on your calendar.</p>
          <ul class="list">
            <li><span class="check">✔</span> No back-and-forth</li>
            <li><span class="check">✔</span> Google/Outlook/Calendly</li>
            <li><span class="check">✔</span> Reduce no-shows</li>
          </ul>
        </div>
        <div class="card">
          <h3>Reputation engine</h3>
          <p class="muted">Auto-request reviews; auto-reply with your brand voice.</p>
          <ul class="list">
            <li><span class="check">✔</span> Review requests</li>
            <li><span class="check">✔</span> Smart reply templates</li>
            <li><span class="check">✔</span> Weekly report</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- HOW IT WORKS -->
  <section id="how">
    <div class="container grid-2">
      <div>
        <h2>How it works</h2>
        <ol class="list" style="counter-reset:step; gap:14px;">
          <li><span class="check">1</span> Connect your number & calendar (15 minutes)</li>
          <li><span class="check">2</span> We turn on SMS reply + qualifiers + booking</li>
          <li><span class="check">3</span> You get a daily summary and more bookings</li>
        </ol>
        <p class="muted" style="margin-top:10px;">Prefer a white-glove setup? We’ll do it for you—same day.</p>
        <div class="cta-row"><a class="btn btn-primary" href="#booking">See a live demo</a></div>
      </div>
      <div class="card">
        <h3 style="margin-top:0">Industries</h3>
        <p class="muted">Built for local & appointment-based businesses.</p>
        <div class="grid-2">
          <ul class="list">
            <li><span class="check">✔</span> Plumbing</li>
            <li><span class="check">✔</span> HVAC</li>
            <li><span class="check">✔</span> Roofing</li>
          </ul>
          <ul class="list">
            <li><span class="check">✔</span> Med-spa & Dental</li>
            <li><span class="check">✔</span> Legal Intake</li>
            <li><span class="check">✔</span> Home Services</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- PRICING -->
  <section id="pricing">
    <div class="container">
      <h2>Simple pricing</h2>
      <p class="muted">Cancel anytime. No contracts. Pro setup included.</p>
      <div class="pricing" style="margin-top:18px">
        <div class="card price">
          <h3>Starter</h3>
          <div class="amt">$297</div>
          <p class="muted">First month pilot, then $497/mo</p>
          <ul class="list">
            <li><span class="check">✔</span> SMS reply & qualifiers</li>
            <li><span class="check">✔</span> Calendar booking</li>
            <li><span class="check">✔</span> Daily summary</li>
          </ul>
          <div class="cta-row" style="margin-top:12px"><a class="btn btn-primary" href="#booking">Start pilot</a></div>
        </div>
        <div class="card price" style="border-color: rgba(34,197,94,.55)">
          <h3>Standard</h3>
          <div class="amt">$497</div>
          <p class="muted">Per location / month</p>
          <ul class="list">
            <li><span class="check">✔</span> Everything in Starter</li>
            <li><span class="check">✔</span> Review requests + replies</li>
            <li><span class="check">✔</span> Weekly report</li>
          </ul>
          <div class="cta-row" style="margin-top:12px"><a class="btn btn-primary" href="#booking">Get started</a></div>
        </div>
        <div class="card price">
          <h3>Pro</h3>
          <div class="amt">$797</div>
          <p class="muted">Multi-location / month</p>
          <ul class="list">
            <li><span class="check">✔</span> Priority support & SLAs</li>
            <li><span class="check">✔</span> Multi-location analytics</li>
            <li><span class="check">✔</span> White-label option</li>
          </ul>
          <div class="cta-row" style="margin-top:12px"><a class="btn btn-primary" href="#contact">Talk to sales</a></div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT + DEMO -->
  <section id="contact">
    <div class="container bottom-sections">

      <!-- TALK TO SALES -->
      <form id="contactForm" class="space-y-4" novalidate>
  <div>
    <label for="c-name" class="block text-sm font-medium">Full name</label>
    <input id="c-name" name="name" type="text" required
           class="mt-1 w-full rounded border px-3 py-2"
           placeholder="Jane Doe" />
    <small id="c-name-err" class="text-red-600 hidden">Please enter your name.</small>
  </div>

  <div>
    <label for="c-email" class="block text-sm font-medium">Email</label>
    <input id="c-email" name="email" type="email" inputmode="email" required
           class="mt-1 w-full rounded border px-3 py-2"
           placeholder="you@example.com" />
    <small id="c-email-err" class="text-red-600 hidden">Enter a valid email.</small>
  </div>

  <div>
    <label for="c-phone" class="block text-sm font-medium">Phone</label>
    <input id="c-phone" name="phone" type="tel" inputmode="tel" autocomplete="tel" required
           class="mt-1 w-full rounded border px-3 py-2"
           placeholder="(615) 555-0123" />
    <small id="c-phone-err" class="text-red-600 hidden">
      Enter a valid 10-digit US phone (e.g., (615) 555-0123).
    </small>

    <p class="muted" style="font-size:12px;margin-top:4px;">
            By providing your phone number, you agree to receive SMS messages from NovaDesk related to scheduling and your inquiry.
            Message &amp; data rates may apply. Reply <strong>STOP</strong> to opt out or <strong>HELP</strong> for help.
          </p>
    
  </div>

  <div>
    <label for="c-msg" class="block text-sm font-medium">Message</label>
    <textarea id="c-msg" name="message" rows="4"
              class="mt-1 w-full rounded border px-3 py-2"
              placeholder="Tell us a bit about your needs…"></textarea>
  </div>

  <button id="c-submit" type="submit"
          class="inline-flex items-center justify-center rounded bg-indigo-600 px-4 py-2 font-medium text-white hover:bg-indigo-700 disabled:opacity-50">
    Send
  </button>

  <p id="c-success" class="text-green-700 hidden">Thanks! We received your message and will reply shortly.</p>
  <p id="c-fail" class="text-red-700 hidden">Oops — couldn’t send your message. Please try again.</p>

        <p class="muted" style="font-size:12px;margin-top:8px;">
          By submitting, you agree to our <a href="/privacy.html">Privacy Policy</a>.
        </p>
        
</form>

      

      <!-- BOOK DEMO -->
      <section class="calendly" id="booking">
        <h2>Book a 7-minute demo</h2>

        <form id="book-demo" onsubmit="return submitBooking(event)" class="card" style="display:grid;gap:10px; padding:16px; border-radius:12px; max-width:520px" novalidate>
          <label for="bname">Name</label>
          <input id="bname" name="name" type="text" autocomplete="name" required />

          <label for="bemail">Email</label>
          <input id="bemail" name="email" type="email" autocomplete="email" required />
          <small id="bemailError" class="error">Please enter a valid email address.</small>

          <label for="bphone">Phone</label>
          <input id="bphone" name="phone" type="tel" inputmode="tel" placeholder="(555) 123-4567" autocomplete="tel" required />
          <small id="bphoneError" class="error">Please enter a valid 10-digit US phone number.</small>

          <p class="muted" style="font-size:12px;margin-top:4px;">
            By providing your phone number, you agree to receive SMS messages from NovaDesk related to scheduling and your inquiry.
            Message &amp; data rates may apply. Reply <strong>STOP</strong> to opt out or <strong>HELP</strong> for help.
          </p>

          <label for="bwhen">Preferred time</label>
          <input id="bwhen" name="when" type="datetime-local" required />

          <button class="btn btn-primary" type="submit">Book Demo</button>
          <p id="bstatus" class="muted" style="margin-top:8px;"></p>
        </form>
      </section>

    </div>
  </section>
</main>

<footer class="foot">
  <div class="container" style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;">
    <div>© <span id="year"></span> NovaDesk. All rights reserved.</div>
    <div>
      <a href="/privacy.html">Privacy</a> ·
      <a href="/terms.html">Terms</a> ·
      <a href="mailto:hello@NovaDeskApp.com">hello@NovaDeskApp.com</a>
    </div>
  </div>
</footer>

<script>
  // Mobile menu
  function toggleMenu(close) {
    const panel = document.getElementById('mobilePanel');
    const isHidden = panel.hasAttribute('hidden');
    if (close || !isHidden) {
      panel.style.display = 'none';
      panel.setAttribute('hidden', '');
    } else {
      panel.style.display = 'block';
      panel.removeAttribute('hidden');
    }
  }
  // Year
  document.getElementById('year').textContent = new Date().getFullYear();
</script>

<!-- SALES FORM SUBMIT (Formspree) with validation -->
<script>
  (function () {
    const form = document.getElementById('sales-form');
    if (!form) return;

    const phoneInput = document.getElementById('phone');
    const phoneError = document.getElementById('phoneError');
    const emailInput = document.getElementById('email');
    const emailError = document.getElementById('emailError');
    const phoneE164Hidden = document.getElementById('phone_e164');

    // live phone mask
    attachPhoneMask('phone', 'phoneError');

    form.addEventListener('submit', async function (e) {
      e.preventDefault();

      // clear errors
      phoneError.style.display = 'none';
      emailError.style.display = 'none';

      // validate phone (required, 10 digits)
      const e164 = toE164US(phoneInput.value);
      if (!e164) {
        phoneError.style.display = 'inline';
        return;
      }
      phoneE164Hidden.value = e164;

      // validate email (required)
      if (!isValidEmail(emailInput.value)) {
        emailError.style.display = 'inline';
        return;
      }

      // disable button
      const btn = form.querySelector('button[type="submit"]');
      if (btn) { btn.disabled = true; btn.textContent = 'Sending…'; }

      try {
        const endpoint = form.getAttribute('action');
        const fd = new FormData(form);
        const res = await fetch(endpoint, { method: 'POST', headers: { 'Accept': 'application/json' }, body: fd });
        if (res.ok) {
          window.location.href = '/thanks.html';
        } else {
          alert('Sorry, something went wrong. Please email hello@novadeskapp.com.');
          if (btn) { btn.disabled = false; btn.textContent = 'Send'; }
        }
      } catch (err) {
        alert('Network error. Please try again or email hello@novadeskapp.com.');
        const btn = form.querySelector('button[type="submit"]');
        if (btn) { btn.disabled = false; btn.textContent = 'Send'; }
      }
    });
  })();
</script>

<!-- DEMO BOOKING (talks to your API) -->
<script>
  // ----- CONFIGURE THIS -----
  const API_BASE = "http://localhost:4000";  // change to your prod API base when deployed
  const TENANT_ID = "sandbox-dental";
  const DEMO_MIN = 7;

  async function submitBooking(e) {
    e.preventDefault();
    const statusEl = document.getElementById('bstatus');
    const form = document.getElementById('book-demo');

    // clear errors
    document.getElementById('bphoneError').style.display = 'none';
    document.getElementById('bemailError').style.display = 'none';

    // fields
    const whenField = document.getElementById('bwhen').value;
    const name  = document.getElementById('bname').value.trim();
    const email = document.getElementById('bemail').value.trim();
    const phone = document.getElementById('bphone').value.trim();

    // validate email
    if (!isValidEmail(email)) {
      document.getElementById('bemailError').style.display = 'inline';
      return false;
    }

    // validate phone (required, 10 digits)
    const phoneE164 = toE164US(phone);
    if (!phoneE164) {
      document.getElementById('bphoneError').style.display = 'inline';
      return false;
    }

    // time
    if (!whenField) {
      statusEl.textContent = "Please pick a date & time.";
      return false;
    }
    const startLocal = new Date(whenField);
    const startIso = startLocal.toISOString();
    const endIso = new Date(startLocal.getTime() + DEMO_MIN * 60000).toISOString();

    statusEl.textContent = "Booking...";

    try {
      const payload = {
        tenantId: TENANT_ID,
        startIso,
        endIso,
        phone: phoneE164,
        email,
        notes: `Website demo request — ${name} <${email}>, ${formatPhoneLocal(phone)}`
      };

      const res = await fetch(`${API_BASE}/calendar/book`, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(payload)
      });
      const data = await res.json().catch(() => ({}));

      if (res.ok && data.ok) {
        statusEl.textContent = "Booked! We’ve emailed your confirmation and calendar invite.";
        form.reset();
      } else {
        statusEl.textContent = `Error: ${data.error || 'Failed to create event'}`;
      }
    } catch (err) {
      statusEl.textContent = "Network error. Please try again.";
    }
    return false;
  }
</script>

<!-- Shared helpers (masking + validation) -->
<script>
  // ——— shared validators/formatters ———
  function digitsOnly(s) {
    return String(s || '').replace(/\D/g, '');
  }
  function formatUSPhone(input) {
    const d = digitsOnly(input).slice(0, 10);
    const len = d.length;
    if (len === 0) return '';
    if (len < 4) return `(${d}`;
    if (len < 7) return `(${d.slice(0,3)}) ${d.slice(3)}`;
    return `(${d.slice(0,3)}) ${d.slice(3,6)}-${d.slice(6)}`;
  }
  function isValidPhone10(input) {
    return digitsOnly(input).length === 10;
  }
  function isValidEmail(s) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(s || '').trim());
  }
  function show(el) { el.classList.remove('hidden'); }
  function hide(el) { el.classList.add('hidden'); }

  // ——— Talk to sales form wiring ———
  (function wireContactForm() {
    const form = document.getElementById('contactForm');
    if (!form) return;

    const nameEl   = document.getElementById('c-name');
    const emailEl  = document.getElementById('c-email');
    const phoneEl  = document.getElementById('c-phone');
    const msgEl    = document.getElementById('c-msg');
    const submitEl = document.getElementById('c-submit');

    const nameErr  = document.getElementById('c-name-err');
    const emailErr = document.getElementById('c-email-err');
    const phoneErr = document.getElementById('c-phone-err');

    const okEl     = document.getElementById('c-success');
    const failEl   = document.getElementById('c-fail');

    // live phone formatting
    phoneEl.addEventListener('input', () => {
      const caret = phoneEl.selectionStart;
      const before = phoneEl.value;
      phoneEl.value = formatUSPhone(before);
      // keep caret behavior simple
    });

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      hide(okEl); hide(failEl);
      hide(nameErr); hide(emailErr); hide(phoneErr);

      let valid = true;
      if (!nameEl.value.trim()) { show(nameErr); valid = false; }
      if (!isValidEmail(emailEl.value)) { show(emailErr); valid = false; }
      if (!isValidPhone10(phoneEl.value)) { show(phoneErr); valid = false; }

      if (!valid) return;

      submitEl.disabled = true;

      try {
        const res = await fetch('/contact', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            name: nameEl.value.trim(),
            email: emailEl.value.trim(),
            phone: phoneEl.value.trim(),
            message: msgEl.value.trim()
          })
        });
        const data = await res.json().catch(() => ({}));

        if (res.ok && data.ok) {
          show(okEl);
          form.reset();
        } else {
          console.error('contact failed', data);
          show(failEl);
        }
      } catch (err) {
        console.error('contact error', err);
        show(failEl);
      } finally {
        submitEl.disabled = false;
      }
    });
  })();
</script>

</body>
</html>
